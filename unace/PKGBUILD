# Contributor: Edward E <develinthedetail@gmail.com>

pkgname=unace
pkgver=2.5
pkgrel=1
pkgdesc="An extraction tool for the proprietary ace archive format"
arch=('i686' 'x86_64')
url='http://www.winace.com/'
license=('custom')
depends=('ncurses')
install=unace.install
source=("http://ftp.debian.org/debian/pool/non-free/u/${pkgname}-nonfree/${pkgname}-nonfree_2.5.orig.tar.gz"
        "https://salsa.debian.org/fabian/${pkgname}-nonfree/raw/6f374bfd86ced925409a8bd70b5786e6020b4cbe/debian/patches/20-isatty.diff"
        '01-makefiles.dpatch'
        '04-64bit.dpatch')
sha256sums=('5a85480ed0d39672962a05dc835efc0876be4f0d47b0fa7741b955ae7b148566'
            'f16f115eb323a5b9a1c7b6c519b10ea7f046a73073f3cdd9169c696f39144c0b'
            '3b701525255b158ea2b518a0495e0684af5c4665aecc916b79c0ba6271ebb205'
            '2240be8bf773be0addb640dbfe0b298f7efaa0405ec745aa349e953fe68beda4')

prepare() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  patch --binary -p1 -i "${srcdir}"/01-makefiles.dpatch
  patch --binary -p1 -i "${srcdir}"/04-64bit.dpatch
  patch --binary -p1 -i "${srcdir}"/20-isatty.diff
}


build() {
  cd "${srcdir}/${pkgname}-${pkgver}"

  make
}

package() {
  cd "${srcdir}/${pkgname{-${pkgver}"

  install -Dm755 unace "${pkgdir/usr/bin/${pkgname}"
  install -Dm644 licence "${pkgdir}/usr/share/licenses/${pkgname}/license"
}
